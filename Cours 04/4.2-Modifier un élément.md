# Modifier un `HTMLElement` du DOM

## Table des matières

- [1. La classe `Element` de l'API DOM](#1-la-classe-element-de-lapi-dom)
- [2. La classe `HTMLElement`](#2-la-classe-htmlelement)
- [3. Propriétés et attributs](#3-propriétés-et-attributs)
- [4. Lecture d'une propriété ou d'un attribut](#4-lecture-dune-propriété-ou-dun-attribut)
- [5. Modification d'une propriété ou d'un attribut](#5-modification-dune-propriété-ou-dun-attribut)
- [6. Contenu textuel et HTML d'un `HTMLElement`](#6-contenu-textuel-et-html-dun-htmlelement)
  - [`.textContent`](#textcontent)
  - [`.innerHTML`](#innerhtml)
  - [`.outerHTML`](#outerhtml)
  - [`.innerText` (prend en compte le rendu CSS)](#innertext-prend-en-compte-le-rendu-css)

## 1. La classe `Element` de l'API DOM

Dans l'API DOM, la classe `Element` représente un élément HTML ou XML. C'est une interface de base pour tous les éléments du DOM, et elle hérite de la classe `Node`. Les éléments HTML spécifiques (comme `HTMLElement`, `HTMLDivElement`, etc.) héritent de `Element` et ajoutent des propriétés et méthodes spécifiques à leur type.

## 2. La classe `HTMLElement`

`HTMLElement` est une sous-classe de `Element` qui représente les éléments HTML spécifiques. Elle ajoute des propriétés et méthodes supplémentaires pour manipuler les éléments HTML, comme `innerHTML`, `textContent`, `classList`, etc.

On manipule souvent des instances de `HTMLElement` après les avoir sélectionnées dans le DOM, et c'est à travers ces instances que nous allons accéder ou modifier le contenu et les propriétés des éléments HTML.

### Façons courantes d'obtenir un `HTMLElement`

- `document.getElementById(id)` : retourne un élément avec l'`id` spécifié
- `document.getElementsByClassName(names)` : retourne une collection d'éléments avec la classe spécifiée
- `document.getElementsByTagName(name)` : retourne une collection d'éléments avec le nom de balise spécifié
- `document.querySelector(selectors)` : retourne le premier élément correspondant au sélecteur CSS
- `document.querySelectorAll(selectors)` : retourne une NodeList de tous les éléments correspondant au sélecteur CSS
- `element.children` : retourne une HTMLCollection des éléments enfants directs

On pourra ainsi stocker les appels à ces méthodes dans des variables pour manipuler les éléments du DOM plus facilement.

## 3. Propriétés et attributs

Un élément HTML possède des attributs (dans le code HTML) et des propriétés (dans l'objet JavaScript correspondant). Ces deux notions sont liées, mais **ce n'est pas la même chose**.

### Attribut = ce qui est écrit dans le HTML

Un attribut est une **chaîne de caractères** présente dans le **code HTML initial**.

- Les **attributs**...
  - Ne sont pas typés, tout est texte.
  - La méthode `hasAttribute("attribut")` permet de vérifier la présence d'un attribut.
  - La méthode `removeAttribute("attribut")` permet de supprimer un attribut.
  - La méthode `getAttribute("value")` renvoie la valeur écrite dans le HTML (même si elle ne correspond plus à l'état courant).
  - La méthode `setAttribute("attribut", valeur)` permet de définir ou modifier un attribut.

### Propriété = ce qui vit dans l'objet JavaScript

Un `HTMLElement` est un objet JS avec des propriétés qui reflètent **l'état courant** de l'élément.

- Les **propriétés**...
  - Peuvent être de n'importe quel type (string, boolean, number, etc.).
  - Sont synchronisées avec les attributs correspondants (mais pas toujours de manière bidirectionnelle).
  - Sont accessibles via `element.propriété` et modifiables via `element.propriété = valeur`.

### Relation entre attributs et propriétés

Certains attributs HTML ont une **propriété JS** équivalente (souvent sur `HTMLElement`).

Par exemple :

- Identité & classes : `id`, `className`, `classList`
- Formulaires : `value`, `checked`, `disabled`, `required`
- Liens & médias : `href`, `src`, `alt`
- Accessibilité : `aria*` (via attributs)

Celles-ci sont dites "**réfléchies**" (*reflected*) car elles sont **synchronisées** entre l'attribut HTML et la propriété JS, bien que le comportement exact puisse varier selon l'attribut/propriété.

D'autres attributs, notamment les `data-*` et les attributs personnalisés ne sont **pas synchronisés** par des propriétés JS, et dans ce cas, il faut utiliser les méthodes `getAttribute` et `setAttribute` pour y accéder ou les modifier.

## 4. Lecture d'une propriété ou d'un attribut

Pour **lire la valeur** d'une propriété ou d'un attribut d'un élément, on peut utiliser la syntaxe `element.propriété` ou `element.getAttribute("attribut")`.

```html
<input id="user" type="text" value="Albert" disabled title="Nom d'utilisateur">
```

```js
const element = document.getElementById("user");
const id = element.id; // accès à la propriété id, qui est "user"
const title = element.getAttribute("title"); // accès à l'attribut title, qui est "Nom d'utilisateur"
```

## 5. Modification d'une propriété ou d'un attribut

Pour **modifier la valeur** d'une propriété ou d'un attribut, on peut utiliser la syntaxe `element.propriété = valeur` ou `element.setAttribute("attribut", valeur)`.

```html
<input id="user" type="text" value="Albert" disabled title="Nom d'utilisateur">
```

```js
const element = document.getElementById("user");
element.value = "Maxime"; // modifie la propriété value, qui devient "Maxime"
element.setAttribute("title", "Nom de connexion"); // modifie l'attribut title
element.removeAttribute("disabled"); // supprime l'attribut disabled
```

## 6. Contenu textuel et HTML d'un `HTMLElement`

### `.textContent`

- **Lit/écrit** *tout* le texte de l'élément (et de ses descendants) **sans HTML**.
- **Ne déclenche pas** d'analyse HTML ⇒ **sécuritaire** contre les injections.

```js
// Lecture
const txt = el.textContent;

// Écriture (remplace tout le contenu par du texte)
el.textContent = "Bonjour <em>Monde</em>"; // affiché littéralement
```

### `.innerHTML`

- **Lit/écrit** le **HTML interne** de l'élément.
- ⚠️ **Risque XSS** si la source vient d'utilisateurs (de l'externe) ⇒ privilégier `.textContent` + création d'éléments.

```js
// Lecture
const html = el.innerHTML; // renvoie une chaîne HTML

// Écriture (ré-interprète/parse du HTML)
el.innerHTML = "Bonjour <em>Monde</em>"; // rend du vrai HTML
```

### `.outerHTML`

- **Remplace l'élément lui‑même** par le HTML fourni.

```js
// Remplacer totalement l'élément dans le DOM
el.outerHTML = '<p class="info">Remplacé !</p>';
```

### `.innerText` (prend en compte le rendu CSS)

- Lit/écrit le texte **tel qu'il s'afficherait** (p. ex., respecte `display:none`).
- Plus **coûteux** que `.textContent`.

```js
const visibleText = el.innerText;
el.innerText = "Texte visible";
```
