# Tailwind CSS ‚Äî Styliser la validation de formulaires en JavaScript

## 1. Pourquoi Tailwind pour la validation ?

Tailwind CSS est un framework **utilitaire** : plut√¥t que d'√©crire du CSS personnalis√©, on compose des classes directement dans le HTML. Pour la validation de formulaires, cette approche est particuli√®rement efficace, car on peut :

- **Ajouter / retirer des classes dynamiquement** via `classList.add()/.remove()` en JavaScript
- **D√©finir des √©tats visuels clairs** (neutre ‚Üí en erreur ‚Üí valide) avec des classes pr√©visibles
- **√âviter de jongler** entre un fichier JS et un fichier CSS s√©par√© pour les √©tats

## 2. Concepts fondamentaux

### 2.1 Les classes utilitaires de base pour les champs

|R√¥le|Classes Tailwind sugg√©r√©es|
|---|---|
|Champ de base|`border rounded px-3 py-2 w-full focus:outline-none`|
|√âtat neutre (bordure)|`border-gray-300`|
|√âtat invalide|`border-red-500 bg-red-50 focus:ring-red-300`|
|√âtat valide|`border-green-500 bg-green-50 focus:ring-green-300`|
|Focus avec anneau|`focus:ring-2 focus:ring-offset-1`|

### 2.2 Les classes pour les messages d'erreur

```html
<!-- Message d'erreur (cach√© par d√©faut) -->
<p class="text-red-600 text-sm mt-1 hidden" id="email-error">
  Adresse courriel invalide.
</p>
```

| Classe | Effet |
| --- | --- |
| `hidden` | `display: none` ‚Äî masque l'√©l√©ment |
| `text-red-600` | Texte rouge fonc√© |
| `text-green-600` | Texte vert ‚Äî pour les confirmations |
| `text-sm` | Texte petit (14px) |
| `mt-1` | Petite marge au-dessus |

### 2.3 Les ic√¥nes de statut (optionnel)

On peut ins√©rer des ic√¥nes Unicode ou SVG √† l'int√©rieur d'un conteneur `relative` :

```html
<div class="relative">
  <input type="text" id="username" class="border rounded px-3 py-2 w-full pr-10" />
  <span class="absolute right-3 top-2.5 text-green-500 hidden" id="username-icon">‚úì</span>
</div>
```

```js
// Dans la fonction de validation du champ :
const icone = document.getElementById('username-icon');

if (estValide) {
  icone.classList.remove('hidden');
} else {
  icone.classList.add('hidden');
}
```

## 3. Strat√©gie de validation en JavaScript

### 3.1 Les deux approches principales

**Validation √† la soumission (`submit`)** ‚Äî on valide tout au moment o√π l'utilisateur clique sur Envoyer.

**Validation en temps r√©el (`input` / `blur`)** ‚Äî on valide chaque champ d√®s que l'utilisateur le quitte ou tape dedans. Meilleure exp√©rience utilisateur.

> üí° **Bonne pratique** : Utiliser `blur` pour d√©clencher la premi√®re validation, puis `input` pour mettre √† jour en direct une fois l'erreur affich√©e.

### 3.2 Patron de base (une fonction par champ)

```js
function validerEmail() {
  const champ = document.getElementById('email');
  const erreur = document.getElementById('email-erreur');
  const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

  if (!regex.test(champ.value.trim())) {
    // √âtat invalide
    champ.classList.remove('border-gray-300', 'border-green-500');
    champ.classList.add('border-red-500', 'bg-red-50');
    erreur.classList.remove('hidden');
    return false;
  } else {
    // √âtat valide
    champ.classList.remove('border-gray-300', 'border-red-500', 'bg-red-50');
    champ.classList.add('border-green-500', 'bg-green-50');
    erreur.classList.add('hidden');
    return true;
  }
}
```

### 3.3 Patron r√©utilisable (une seule fonction g√©n√©rique)

```js
/**
 * Applique ou retire les classes Tailwind d'erreur sur un champ.
 * @param {HTMLElement} champ   - L'√©l√©ment <input>
 * @param {HTMLElement} msgErreur - L'√©l√©ment <p> du message d'erreur
 * @param {boolean}     estValide - R√©sultat de la validation
 */
function mettreAJourEtat(champ, msgErreur, estValide) {
  const classesErreur  = ['border-red-500', 'bg-red-50'];
  const classesValide  = ['border-green-500', 'bg-green-50'];
  const classeNeutre   = 'border-gray-300';

  if (estValide) {
    champ.classList.remove(...classesErreur, classeNeutre);
    champ.classList.add(...classesValide);
    msgErreur.classList.add('hidden');
  } else {
    champ.classList.remove(...classesValide, classeNeutre);
    champ.classList.add(...classesErreur);
    msgErreur.classList.remove('hidden');
  }
}
```

## 4. Structure HTML recommand√©e

Chaque champ devrait suivre ce patron pour faciliter le ciblage en JS :

```html
<div class="mb-4">
  <label for="nom" class="block text-sm font-medium text-gray-700 mb-1">
    Nom complet
  </label>
  <input
    type="text"
    id="nom"
    name="nom"
    placeholder="Jean Tremblay"
    class="border border-gray-300 rounded px-3 py-2 w-full
           focus:outline-none focus:ring-2 focus:ring-blue-300 transition"
  />
  <p id="nom-erreur" class="text-red-600 text-sm mt-1 hidden">
    Le nom est obligatoire.
  </p>
</div>
```

> **Note :** La classe `transition` de Tailwind ajoute une animation douce lors des changements de couleur.

## 5. Emp√™cher la soumission si invalide

```js
const formulaire = document.getElementById('mon-formulaire');

formulaire.addEventListener('submit', (e) => {
  e.preventDefault(); // Toujours emp√™cher le rechargement pendant les tests

  const nomValide    = validerNom();
  const emailValide  = validerEmail();
  const mdpValide    = validerMotDePasse();

  if (nomValide && emailValide && mdpValide) {
    // ‚úÖ Tout est valide ‚Üí on peut soumettre ou afficher un succ√®s
    afficherSucces();
  }
  // Sinon : les messages d'erreur sont d√©j√† visibles gr√¢ce aux fonctions
});
```

## 6. Afficher un message de succ√®s global

```html
<div id="message-succes"
     class="hidden bg-green-100 border border-green-400 text-green-800
            rounded px-4 py-3 mt-4">
  ‚úÖ Formulaire envoy√© avec succ√®s !
</div>
```

```js
function afficherSucces() {
  document.getElementById('message-succes').classList.remove('hidden');
}
```

## 7. R√©capitulatif des classes Tailwind cl√©s

| Classe | Description |
| --- | --- |
| `hidden` | Masque l'√©l√©ment (`display: none`) |
| `border-red-500` | Bordure rouge |
| `border-green-500` | Bordure verte |
| `bg-red-50` | Fond rouge tr√®s p√¢le |
| `bg-green-50` | Fond vert tr√®s p√¢le |
| `text-red-600` | Texte rouge fonc√© |
| `text-green-600` | Texte vert fonc√© |
| `focus:ring-2` | Anneau de focus (2px) |
| `transition` | Animation CSS sur les changements de propri√©t√© |
| `rounded` | Coins arrondis (4px) |

## 8. √Ä retenir

1. **Ne jamais modifier le CSS directement en JS** ‚Äî toujours passer par `classList.add/remove`
2. **S√©parer la logique de validation** (retourne `true/false`) **des effets visuels** (applique les classes)
3. **Utiliser `hidden`** plut√¥t que `display = 'none'` pour rester coh√©rent avec Tailwind
4. **Tester avec `blur` et `submit`** ‚Äî les deux √©v√©nements sont n√©cessaires pour une bonne UX
